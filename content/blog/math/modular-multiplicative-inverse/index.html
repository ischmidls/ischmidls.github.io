<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplicative Inverse Sequence</title>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          jax: ["input/TeX", "output/HTML-CSS"],
          extensions: ["tex2jax.js"],
          "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] },
          tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
          TeX: { noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } } },
          messageStyle: "none"
        });
        </script>    
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
    
</head>
<body>
    <h1>Multiplicative Inverse Sequence</h1>
    <p>
       
       The modular multiplicative inverse of an integer $a $ modulo $m $ is an integer $y $ such that:
       $
       a \cdot y \equiv 1 \pmod{m}
       $
       This inverse exists if and only if $a $ and $m $ are coprime (i.e., their greatest common divisor, or GCD, is 1).
       
For example:
       If $x = 2 $ and $m = 7 $, the sequence might look like:
         $
         [4, 2, 1, 4, 2, 1, \dots]
         $
         This is because:
         $ 2^1 \equiv 2 \pmod{7} $, and the inverse of 2 modulo 7 is 4.
         $ 2^2 \equiv 4 \pmod{7} $, and the inverse of 4 modulo 7 is 2.
         $ 2^3 \equiv 1 \pmod{7} $, and the inverse of 1 modulo 7 is 1.
         The sequence repeats after this point.
       </p>

    <script>
        function modInverse(a, m) {
            // validate inputs
            [a, m] = [Number(a), Number(m)]
            if (Number.isNaN(a) || Number.isNaN(m)) {
                return NaN; // invalid input
            }
            a = (a % m + m) % m;
            if (!a || m < 2) {
                return NaN; // invalid input
            }
            // find the gcd
            const s = [];
            let b = m;
            while (b) {
                [a, b] = [b, a % b];
                s.push({a, b});
            }
            if (a !== 1) {
                return NaN; // inverse does not exist
            }
            // find the inverse
            let x = 1;
            let y = 0;
            for (let i = s.length - 2; i >= 0; --i) {
                [x, y] = [y, x - y * Math.floor(s[i].a / s[i].b)];
            }
            return (y % m + m) % m;
        }

        // Function to calculate the sequence of multiplicative inverses
        function calculateInverseSequence(x, m) {
            const inverseSequence = [];
            let currentPower = x % m;
            let inverse = modInverse(currentPower, m);
            inverseSequence.push(inverse);

            const seen = new Set();
            seen.add(inverse);

            while (true) {
                currentPower = (currentPower * x) % m;
                inverse = modInverse(currentPower, m);

                if (seen.has(inverse)) {
                    break;
                }

                inverseSequence.push(inverse);
                seen.add(inverse);
            }

            return inverseSequence;
        }

        // Function to handle form submission
        function calculateAndDisplaySequence() {
            const numX = document.getElementById('numberX').value;
            const numM = document.getElementById('numberM').value;

            const x = Number(numX);
            const m = Number(numM);

            if (Number.isNaN(x) || Number.isNaN(m)) {
                alert('Please enter valid numbers for x and m.');
                return;
            }

            const inverseSequence = calculateInverseSequence(x, m);

            document.getElementById('output').innerText = `Inverse Sequence: ${inverseSequence.join(', ')}`;
        }
    </script>

    <label for="numberX">Enter a number (x):</label>
    <input type="number" id="numberX"><br><br>
    <label for="numberM">Enter a modulus (m):</label>
    <input type="number" id="numberM"><br><br>

    <button onclick="calculateAndDisplaySequence()">Calculate Inverse Sequence</button><br><br>

    <div id="output"></div>
    <script src="https://gist.github.com/ischmidls/73b99e6f1f1f273e72442c1efc36efbd.js"></script>
</body>
</html>

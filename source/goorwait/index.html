<!DOCTYPE html>
<html>
<head>
  <title>The choice is yours: to go or wait</title>
  <style>
    #container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    #content {
      width: 400px;
      height: 400px;
      text-align: center;
      border: 1px solid black;
    }
    #circle {
      position: absolute;
      top: 0;
      left: 0;
      width: 50px;
      height: 50px;
      background-color: blue;
      border-radius: 50%;
    }
    #square {
      position: absolute;
      top: 150px;
      left: 150px;
      width: 100px;
      height: 100px;
      background-color: red;
    }
    #message {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: bold;
      color: black;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="content">
      <div id="square"></div>
      <div id="circle"></div>
      <div id="message">
        The choice is yours: to <a href="./rabbithole/index.html">go</a> or wait.
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const circle = document.getElementById('circle');
      const square = document.getElementById('square');
      const message = document.getElementById('message');
      let x = 0;
      let y = 0;

      function moveCircle(e) {
        const circleRect = circle.getBoundingClientRect();
        const squareRect = square.getBoundingClientRect();

        if (e.type === 'keydown') {
          switch (e.key) {
            case 'w':
            case 'ArrowUp':
              y -= 10;
              break;
            case 'a':
            case 'ArrowLeft':
              x -= 10;
              break;
            case 's':
            case 'ArrowDown':
              y += 10;
              break;
            case 'd':
            case 'ArrowRight':
              x += 10;
              break;
          }
        } else if (e.type === 'touchmove') {
          e.preventDefault(); // Prevent default touch behavior
          const touchPos = getTouchPos(e);
          x = touchPos.x;
          y = touchPos.y;
        }

        circle.style.transform = `translate(${x}px, ${y}px)`;

        if (isColliding(circleRect, squareRect)) {
          message.style.display = 'block';
        } else {
          message.style.display = 'none';
        }
      }

      function isColliding(rect1, rect2) {
        return (
          rect1.left < rect2.right &&
          rect1.right > rect2.left &&
          rect1.top < rect2.bottom &&
          rect1.bottom > rect2.top
        );
      }

      function getTouchPos(touchEvent) {
        const rect = square.getBoundingClientRect();
        const touch = touchEvent.touches[0] || touchEvent.changedTouches[0];
        const x = touch.clientX - rect.left;
        const y = touch.clientY - rect.top;
        return { x, y };
      }

      document.addEventListener('keydown', moveCircle);
      document.addEventListener('touchmove', moveCircle, { passive: false });
    });
  </script>
</body>
</html>
